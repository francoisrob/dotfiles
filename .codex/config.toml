# Global config for the Engineering Company prototype.
model = "gpt-5.3-codex"
model_reasoning_effort = "high"
approval_policy = 'on-request'
sandbox_mode = 'workspace-write'
model_instructions_file = './agents/orchestrator.md'
model_auto_compact_token_limit = 120000
tool_output_token_limit = 6000
web_search = "live"
suppress_unstable_features_warning = true
personality = "pragmatic"

[features]
collab = true
unified_exec = true
shell_snapshot = true
steer = true
apps = true
search_tool = true

[agents]
max_threads = 8

[skills]
config = [
  { enabled = true, path = "~/.codex/skills/restio-ticket-triage" },
  { enabled = true, path = "~/.codex/skills/restio-commit-push" },
]

[history]
max_bytes = 20000000
persistence = "save-all"

[tools]
view_image = true

[shell_environment_policy]
inherit = "all"
include_only = ["PATH", "HOME", "USER", "SHELL"]

[tui]
animations = false
notifications = true
show_tooltips = false

[profiles.research]
approval_policy = "never"
sandbox_mode = "read-only"
model_reasoning_effort = "high"

[profiles.review]
approval_policy = "never"
sandbox_mode = "read-only"
model_reasoning_effort = "medium"
review_model = "gpt-5.2-codex"

[profiles.execute]
approval_policy = "on-request"
sandbox_mode = "workspace-write"
model_reasoning_effort = "low"

[sandbox_workspace_write]
network_access = true

# Shared MCP configuration (user-provided)
[mcp_servers]

[mcp_servers.serena]
command = "uvx"
args = [
  "--from",
  "git+https://github.com/oraios/serena",
  "serena",
  "start-mcp-server",
  "--context",
  "codex",
]
startup_timeout_sec = 60.0

[mcp_servers.context7]
url = "https://mcp.context7.com/mcp"

[mcp_servers.context7.env_http_headers]
CONTEXT7_API_KEY = "CONTEXT7_API_KEY"

[mcp_servers.nixos]
command = "nix"
args = ["run", "--option", "sandbox", "relaxed", "github:utensils/mcp-nixos"]
startup_timeout_sec = 30.0

[mcp_servers.aws-docs]
command = "uvx"
args = ["awslabs.aws-documentation-mcp-server@latest"]
startup_timeout_sec = 120.0

# [mcp_servers.github]
# url = "https://api.githubcopilot.com/mcp/"
# bearer_token_env_var = "CODEX_GITHUB_PERSONAL_ACCESS_TOKEN"

[mcp_servers.openaiDeveloperDocs]
url = "https://developers.openai.com/mcp"

[mcp_servers.mongodb]
command = "npx"
args = ["-y", "mongodb-mcp-server@latest", "--readOnly"]
env_vars = ["MDB_MCP_CONNECTION_STRING"]


[mcp_servers.firebase]
command = "npx"
args = ["-y", "firebase-tools@latest", "mcp"]
env_vars = ["MDB_MCP_CONNECTION_STRING"]

# [mcp_servers.toggl]
# command = "toggl-mcp"
# env_vars = ["TOGGL_API_TOKEN"]

# [mcp_servers.weather]
# command = "weather-mcp"
# env_vars = ["OPENWEATHER_API_KEY "]

[mcp_servers.restio-support]
command = "node"
args = [ "/home/francois/projects/restio-labs-support/mcp/restio-support-server.js" ]
env_vars = ["RESTIO_API_TOKEN"]

[notice.model_migrations]
"gpt-5.2" = "gpt-5.2-codex"
"gpt-5.1-codex-mini" = "gpt-5.2-codex"
"gpt-5.2-codex" = "gpt-5.3-codex"

[analytics]
enabled = false
